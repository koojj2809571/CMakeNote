
在 Modern CMake 中，`project()` 命令不仅是给项目起个名字，它还承担着**初始化项目环境**的核心任务。

标准的写法通常如下：

CMake

```
project(MyProject 
        VERSION 1.0.0 
        DESCRIPTION "这是一个示例项目"
        LANGUAGES CXX C)
```

---

### 核心参数详解

#### 1. 项目名称 (Project Name) —— **必填**

- **用法：** 紧跟在 `project` 后面的第一个字符串。
    
- **作用：** * 定义变量 `${PROJECT_NAME}`。后续你可以直接使用这个变量，方便代码迁移。
    
    - 在 Windows Visual Studio 中，它决定了 `.sln` 解决方案文件的名称。
        
    - 它还会定义一些隐含变量，如 `MyProject_SOURCE_DIR`（源码目录）和 `MyProject_BINARY_DIR`（构建目录）。
        

#### 2. `VERSION` —— **可选但推荐**

- **用法：** `VERSION 1.2.3.4`
    
- 作用： * CMake 会自动解析并定义以下变量：
    
    * ${PROJECT_VERSION}: 1.2.3.4
    
    * ${PROJECT_VERSION_MAJOR}: 1
    
    * ${PROJECT_VERSION_MINOR}: 2
    
    * ${PROJECT_VERSION_PATCH}: 3
    
    - **进阶：** 它可以方便地同步到 C++ 代码中。你可以通过 CMake 生成一个 `version.h`，让你的程序自动打印出 CMake 中定义的版本号。
        

#### 3. `LANGUAGES` —— **可选（默认为 C 和 CXX）**

- **用法：** `LANGUAGES CXX C CUDA Fortran OBJC`
    
- **作用：** * 告诉 CMake 这个项目需要哪些编译器。
    
    - `CXX` 代表 C++，`C` 代表 C 语言。
        
    - **优化：** 如果你的项目纯粹是 C++，写上 `LANGUAGES CXX` 可以略微加快配置速度，因为 CMake 不再去检测 C 编译器。
        

#### 4. `DESCRIPTION` —— **可选**

- **用法：** `DESCRIPTION "A short project summary"`
    
- **作用：** * 定义变量 `${PROJECT_DESCRIPTION}`。
    
    - 主要用于大型项目或打包（CPack）时，作为元数据写入安装包。
        

---

### `project()` 执行后发生了什么？

当你调用 `project()` 时，CMake 在后台默默做了很多“脏活”：

1. **编译器探测**：根据 `LANGUAGES` 去系统路径寻找 `gcc`, `clang` 或 `cl.exe`。
    
2. **编译环境检查**：它会尝试编译一个微小的程序来确保编译器能正常工作。
    
3. **系统信息收集**：确定当前操作系统（Linux/Windows/macOS）和处理器架构（x86/ARM）。
    

---

### 最佳实践建议

在 Modern CMake 中，**永远优先使用变量**。

**不推荐的做法：**

CMake

```
add_executable(MyAwesomeApp main.cpp)
```

**推荐的做法：**

CMake

```
project(MyAwesomeApp LANGUAGES CXX)
add_executable(${PROJECT_NAME} main.cpp)
```

_这样做的好处是：如果你哪天想改项目名字，只需要改 `project()` 这一行，后面所有的逻辑都不会断开。_
